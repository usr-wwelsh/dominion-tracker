<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dominion Tracker - Builds</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1c2333">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/builds.css">
  <script>if ('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js');</script>
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="site-brand">
      <img class="brand-icon" src="/icon-192.png" alt="">
      <span class="brand-name">Dominion Tracker</span>
    </a>
    <button class="nav-toggle" id="nav-toggle" aria-label="Menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <nav id="main-nav">
      <ul>
        <li><a href="index.html">Leaderboard</a></li>
        <li><a href="games.html">Recent Games</a></li>
        <li><a href="builds.html" class="active">Builds</a></li>
        <li><a href="players.html">Players</a></li>
        <li><a href="scoreboard.html">Play Game</a></li>
      </ul>
    </nav>
  </header>

  <div class="container">
    <div class="page-banner"><h1>Card Builds</h1></div>

    <div id="error-message" class="error" style="display: none;"></div>
    <div id="success-message" class="success" style="display: none;"></div>

    <!-- Existing Builds Section -->
    <div class="card">
      <div class="card-header">Existing Builds</div>

      <div id="loading" class="loading">Loading builds</div>

      <div id="builds-container" style="display: none;">
        <div class="builds-sort-bar">
          <span class="sort-label">Sort:</span>
          <button class="sort-btn active" data-sort="recent">Most Recent</button>
          <button class="sort-btn" data-sort="alpha">Alphabetical</button>
        </div>
        <div id="builds-list">
          <!-- Populated by JavaScript -->
        </div>

        <div id="no-builds" class="text-center mt-lg" style="display: none;">
          <p>No builds created yet. Create your first build below!</p>
        </div>
      </div>
    </div>

    <!-- Create Build Section -->
    <div class="card mt-xl">
      <div class="card-header">Create New Build</div>

      <form id="create-build-form">
        <div class="form-group">
          <label for="build-nickname">Build Nickname *</label>
          <input
            type="text"
            id="build-nickname"
            name="nickname"
            placeholder="e.g., Village Engine, Big Money, Chapel Rush"
            required
          >
        </div>

        <div class="form-group">
          <label>Kingdom Cards (choose 10) *</label>
          <div id="card-count" class="card-count">0 / 10 kingdom cards selected</div>

          <div class="expansion-sections">
            <!-- Base Set -->
            <div class="expansion-section">
              <h3 class="expansion-header">Base Set</h3>
              <div class="card-grid" id="base-cards"></div>
            </div>

            <!-- Intrigue 2e -->
            <div class="expansion-section">
              <h3 class="expansion-header">Intrigue <span class="edition-badge">2e</span></h3>
              <div class="card-grid" id="intrigue-cards"></div>
            </div>

            <!-- Seaside 2e -->
            <div class="expansion-section">
              <h3 class="expansion-header">Seaside <span class="edition-badge">2e</span></h3>
              <div class="card-grid" id="seaside-cards"></div>
            </div>

            <!-- Prosperity 2e -->
            <div class="expansion-section">
              <h3 class="expansion-header">Prosperity <span class="edition-badge">2e</span></h3>
              <div class="card-grid" id="prosperity-cards"></div>
            </div>

            <!-- Empires 1e -->
            <div class="expansion-section">
              <h3 class="expansion-header">Empires <span class="edition-badge">1e</span></h3>
              <div class="card-grid" id="empires-cards"></div>
            </div>

            <!-- Rising Sun 1e -->
            <div class="expansion-section">
              <h3 class="expansion-header">Rising Sun <span class="edition-badge">1e</span></h3>
              <div class="card-grid" id="rising-sun-cards"></div>
            </div>
          </div>
        </div>

        <div class="expansion-sections">
          <!-- Landmarks (Empires) -->
          <div class="expansion-section collapsed">
            <h3 class="expansion-header">Landmarks — Empires <span class="supplemental-note">(optional, no limit)</span></h3>
            <div class="card-grid" id="empires-landmarks"></div>
          </div>

          <!-- Events -->
          <div class="expansion-section collapsed">
            <h3 class="expansion-header">Events <span class="supplemental-note">(optional, no limit)</span></h3>
            <div class="expansion-body">
              <div class="supplemental-group-label">Empires</div>
              <div class="card-grid" id="empires-events"></div>
              <div class="supplemental-group-label">Rising Sun</div>
              <div class="card-grid" id="rising-sun-events"></div>
            </div>
          </div>

          <!-- Prophecies (Rising Sun) -->
          <div class="expansion-section collapsed">
            <h3 class="expansion-header">Prophecies — Rising Sun <span class="supplemental-note">(optional, no limit)</span></h3>
            <div class="card-grid" id="rising-sun-prophecies"></div>
          </div>
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="use-platinum-colony">
            Use Platinum &amp; Colony
          </label>
        </div>

        <button type="submit" class="btn btn-primary">Create Build</button>
        <button type="button" class="btn" id="clear-form">Clear Form</button>
      </form>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script src="js/header.js"></script>
  <script src="js/builds.js"></script>
</body>
</html>
